name: istio
generator: helm
path: "./tmp/istio-1.0.5/install/kubernetes/helm/istio"
hooks:
  before-install:
    - curl -OL https://github.com/istio/istio/releases/download/1.0.5/istio-1.0.5-linux.tar.gz
    - mkdir tmp
    - tar xvf istio-1.0.5-linux.tar.gz -C tmp
  after-install:
    - rm istio-1.0.5-linux.tar.gz
  after-generate:
    - sed -i.bak 's/zipkin:9411/zipkin.jaeger.svc.cluster.local:9411/g' generated/prod/istio/istio.yaml
    - sed -i.bak 's/zipkin.istio-system:9411/zipkin.jaeger.svc.cluster.local:9411/g' generated/prod/istio/istio.yaml

subcomponents:
  - name: istio-namespace
    generator: static
    path: ./manifests
